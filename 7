import 'package:flutter/material.dart';

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Form Example',
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        inputDecorationTheme: InputDecorationTheme(
          border: OutlineInputBorder(borderRadius: BorderRadius.circular(12)),
          filled: true,
          fillColor: Colors.deepOrange[50],
        ),
      ),
      home: MyForm(),
    );
  }
}

class MyForm extends StatefulWidget {
  @override
  State<MyForm> createState() => _MyFormState();
}

class _MyFormState extends State<MyForm> {
  final _key = GlobalKey<FormState>();
  final name = TextEditingController();
  final email = TextEditingController();
  final pass = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Form'),
        backgroundColor: Colors.deepPurple[900],
        foregroundColor: Colors.white,
      ),
      backgroundColor: Colors.amber[50],
      body: Padding(
        padding: EdgeInsets.all(20),
        child: Form(
          key: _key,
          child: Column(
            children: [
              field(Icons.person, 'Name', name,
                  (v) => v!.isEmpty ? 'Please enter your name' : null),
              SizedBox(height: 15),
              field(Icons.email, 'Email', email,
                  (v) => v!.isEmpty ? 'Please enter your email' : null),
              SizedBox(height: 15),
              field(Icons.lock, 'Password', pass,
                  (v) => v!.length < 6 ? 'Min 6 characters' : null,
                  obscure: true),
              SizedBox(height: 25),
              ElevatedButton(
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.deepPurple[900],
                  minimumSize: Size(double.infinity, 50),
                  shape: RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(12)),
                ),
                onPressed: () {
                  if (_key.currentState!.validate()) {
                    ScaffoldMessenger.of(context).showSnackBar(SnackBar(
                        content: Text('Form submitted successfully!'),
                        backgroundColor: Colors.green));
                  }
                },
                child: Text('Submit', style: TextStyle(fontSize: 18)),
              ),
            ],
          ),
        ),
      ),
    );
  }

  Widget field(IconData icon, String label, TextEditingController c,
      String? Function(String?) validate,
      {bool obscure = false}) {
    return TextFormField(
      controller: c,
      obscureText: obscure,
      decoration: InputDecoration(
        labelText: label,
        prefixIcon: Icon(icon, color: Colors.deepPurple[900]),
      ),
      validator: validate,
    );
  }
}
